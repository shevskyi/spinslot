# üéØ DOM –°–¢–†–£–ö–¢–£–†–ê –Ü –¢–†–ê–ù–°–§–û–†–ú–ê–¶–Ü–á –°–ò–ú–í–û–õ–Ü–í

## üìä –Ü–Ñ–†–ê–†–•–Ü–Ø DOM

```
slot-area
  ‚îú‚îÄ‚îÄ reel (6 —à—Ç - –∫–æ–ª–æ–Ω–∫–∏)
  ‚îÇ   ‚îú‚îÄ‚îÄ reel
  ‚îÇ   ‚îú‚îÄ‚îÄ reel
  ‚îÇ   ‚îú‚îÄ‚îÄ reel
  ‚îÇ   ‚îú‚îÄ‚îÄ reel
  ‚îÇ   ‚îú‚îÄ‚îÄ reel
  ‚îÇ   ‚îî‚îÄ‚îÄ reel
  ‚îÇ
  ‚îî‚îÄ‚îÄ –ö–û–ñ–ù–ê reel –ú–Ü–°–¢–ò–¢–¨:
      ‚îî‚îÄ‚îÄ symbols-column (—Å–ø–∏—Å–æ–∫ —Å–∏–º–≤–æ–ª—ñ–≤)
          ‚îú‚îÄ‚îÄ symbol-item  (—ñ–Ω–¥–µ–∫—Å 0)
          ‚îú‚îÄ‚îÄ symbol-item  (—ñ–Ω–¥–µ–∫—Å 1)
          ‚îú‚îÄ‚îÄ symbol-item  (—ñ–Ω–¥–µ–∫—Å 2)
          ‚îú‚îÄ‚îÄ symbol-item  (—ñ–Ω–¥–µ–∫—Å 3)
          ‚îú‚îÄ‚îÄ symbol-item  (—ñ–Ω–¥–µ–∫—Å 4)
          ‚îú‚îÄ‚îÄ symbol-item  (—ñ–Ω–¥–µ–∫—Å 5) ‚Üê –í–ò–î–ò–ú–ò–ô –†–Ø–î–û–ö 0
          ‚îú‚îÄ‚îÄ symbol-item  (—ñ–Ω–¥–µ–∫—Å 6) ‚Üê –í–ò–î–ò–ú–ò–ô –†–Ø–î–û–ö 1
          ‚îú‚îÄ‚îÄ symbol-item  (—ñ–Ω–¥–µ–∫—Å 7) ‚Üê –í–ò–î–ò–ú–ò–ô –†–Ø–î–û–ö 2
          ‚îú‚îÄ‚îÄ symbol-item  (—ñ–Ω–¥–µ–∫—Å 8) ‚Üê –í–ò–î–ò–ú–ò–ô –†–Ø–î–û–ö 3
          ‚îú‚îÄ‚îÄ symbol-item  (—ñ–Ω–¥–µ–∫—Å 9) ‚Üê –í–ò–î–ò–ú–ò–ô –†–Ø–î–û–ö 4
          ‚îú‚îÄ‚îÄ symbol-item  (—ñ–Ω–¥–µ–∫—Å 10) ‚Üê –í–ò–î–ò–ú–ò–ô –†–Ø–î–û–ö 5 (–û—Å—Ç–∞–Ω–Ω—è –≤–∏–¥–∏–º–∞)
          ‚îú‚îÄ‚îÄ symbol-item  (—ñ–Ω–¥–µ–∫—Å 11)
          ‚îî‚îÄ‚îÄ symbol-item  (—ñ–Ω–¥–µ–∫—Å 12)
          
–ö–û–ñ–ù–ò–ô symbol-item –ó–ê–†–ê–ó –°–¢–í–û–†–Æ–Ñ–¢–¨–°–Ø –¢–ê–ö:
```

---

## üîç –î–ï–¢–ê–õ–¨–ù–ê –°–¢–†–£–ö–¢–£–†–ê –û–î–ù–û–ì–û –°–ò–ú–í–û–õ–£

```html
<div class="symbol-item" data-row="5">
    ‚Üì –¶–ï - symbol-item (–±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π DIV)
    ‚îú‚îÄ <img src="path/to/symbol.png" style="width:92%; height:92%; object-fit:contain;">
    ‚îÇ  ‚Üë –¶–ï - symbol-item img (–ó–û–ë–†–ê–ñ–ï–ù–ù–Ø)
    ‚îÇ
    ‚îî‚îÄ [–î–æ–¥–∞—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å –≤–∏–±—É—Ö—É]:
       ‚îú‚îÄ <div class="winning-frame"></div>
       ‚îú‚îÄ <div class="shard"></div>
       ‚îú‚îÄ <div class="shard"></div>
       ‚îú‚îÄ <div class="shard"></div>
       ‚îî‚îÄ ... (8-22 —É–ª–∞–º–∫—ñ–≤)
```

---

## ‚ö° –ß–ò –ï–õ–ï–ú–ï–ù–¢ –û–¢–†–ò–ú–£–Ñ –¢–†–ê–ù–°–§–û–†–ú–ê–¶–Ü–Æ?

### –í–Ü–î–ü–û–í–Ü–î–¨: **–ë–ê–¢–¨–ö–Ü–í–°–¨–ö–ò–ô DIV (symbol-item)** –æ—Ç—Ä–∏–º—É—î —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—é

```javascript
// –õ–Ü 4650 -ÈÅ∏ER —Å–∏–º–≤–æ–ª—É –¥–ª—è –≤–∏–±—É—Ö—É:
const symbolElement = column.children[symbolIndex];
//      ‚Üë –¶–ï - `.symbol-item` (–Ω–µ img!)

// –õ–Ü 2657 - –ü–ï–†–ï–î–ê–ß–ê –ï–õ–ï–ú–ï–ù–¢–£:
addExplosionEffect(symbolElement, winLevel);
//                 ‚Üë —Å–∏–º–≤–æ–ª—å–Ω—ã–π DIV, –Ω–µ img!

// –õ–Ü 2463 - –í–°–¢–ê–í–õ–ï–ù–ù–Ø –¢–†–ê–ù–°–§–û–†–ú–ê–¶–Ü–ô:
function addExplosionEffect(element, winLevel) {
    // element = .symbol-item (DIV)
    
    element.style.position = 'relative';  // ‚Üê –ù–∞ —Å–∏–º–≤–æ–ª—å–Ω–∏–π DIV
    element.style.zIndex = '15';           // ‚Üê –ù–∞ —Å–∏–º–≤–æ–ª—å–Ω–∏–π DIV
    
    const frame = document.createElement('div');
    element.appendChild(frame);  // ‚Üê –î–æ–¥–∞—î–º–æ —Ä–∞–º–∫—É –ö–£ DIV
    
    const shard = document.createElement('div');
    element.appendChild(shard);  // ‚Üê –î–æ–¥–∞—î–º–æ —É–ª–∞–º–∫–∏ –ö–£ DIV
    //                 ‚Üë –í—Å—ñ –¥—ñ—Ç–∏ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ `.symbol-item`, –Ω–µ –¥–æ `img`!
}
```

---

## üìå –ß–ò –û–¢–†–ò–ú–£–Ñ IMG –¢–†–ê–ù–°–§–û–†–ú–ê–¶–Ü–Æ?

### –í–Ü–î–ü–û–í–Ü–î–¨: **–ù–Ü, img –æ—Ç—Ä–∏–º—É—î –ª–∏—à–µ opacity**

```javascript
// –õ–Ü 2535 - –ß–µ—Ä–µ–∑ 120ms:
setTimeout(() => {
    const img = element.querySelector('img');  // –ó–Ω–∞—Ö–æ–¥–∏–º–æ IMG –≤—Å–µ—Ä–µ–¥–∏–Ω—É symbol-item
    if (img) img.style.opacity = '0';  // ‚Üê –¢–Ü–õ–¨–ö–ò opacity –∑–º—ñ–Ω—é—î—Ç—å—Å—è –¥–ª—è IMG!
    // –ù–ï transform! –¢–Ü–õ–¨–ö–ò opacity!
}, 120);
```

### IMG –ù–ï –æ—Ç—Ä–∏–º—É—î:
‚ùå `element.style.transform`
‚ùå `element.style.position`
‚ùå `element.style.zIndex`

### IMG –æ—Ç—Ä–∏–º—É—î –¢–Ü–õ–¨–ö–ò:
‚úÖ `img.style.opacity = '0'` (—á–µ—Ä–µ–∑ 120ms)

---

## üé¨ –ü–û–°–õ–Ü–î–û–í–ù–Ü–°–¢–¨ –¢–†–ê–ù–°–§–û–†–ú–ê–¶–Ü–ô

### –ö–†–û–ö 1: –ó–Ω–∞—Ö–æ–¥–∏–º–æ –µ–ª–µ–º–µ–Ω—Ç (–õ–Ü 4650)
```javascript
const symbolIndex = totalSymbols - 6 + row;
const symbolElement = column.children[symbolIndex];
// symbolElement = <div class="symbol-item">
//                     <img ... />
//                 </div>
```

### –ö–†–û–ö 2: –ü–µ—Ä–µ–¥–∞—î–º–æ DIV –¥–æ —Ñ—É–Ω–∫—Ü—ñ—ó –≤–∏–±—É—Ö—É (–õ–Ü 2657)
```javascript
addExplosionEffect(symbolElement, winLevel);
// –ü–ï–†–ï–î–ê–Ñ–ú–û: .symbol-item DIV (–Ω–µ img!)
```

### –ö–†–û–ö 3: –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º—É—î–º–æ –ë–ê–¢–¨–ö–Ü–í–°–¨–ö–ò–ô DIV (–õ–Ü 2463-2475)
```javascript
function addExplosionEffect(element, winLevel) {
    // element = .symbol-item DIV
    
    element.style.position = 'relative';  // ‚Üê DIV
    element.style.zIndex = '15';           // ‚Üê DIV
    
    // –î–æ–¥–∞—î–º–æ frame —Ä–∞–º–∫—É –ö–£ DIV
    const frame = document.createElement('div');
    frame.className = 'winning-frame';
    element.appendChild(frame);  // ‚Üê appendChild –Ω–∞ DIV
```

### –ö–†–û–ö 4: –°—Ç–≤–æ—Ä—é—î–º–æ —É–ª–∞–º–∫–∏ –ö–£ DIV (–õ–Ü 2490-2530)
```javascript
    // –£–ª–∞–º–∫–∏ –¢–ê–ö–û–ñ –¥–æ–¥–∞—é—Ç—å—Å—è –ö–£ DIV (–Ω–µ –ö–£ img!)
    const shard = document.createElement('div');
    shard.className = 'shard';
    shard.style.left = '50%';
    shard.style.top = '50%';
    shard.style.transform = 'translate(-50%, -50%) rotate(...)';
    
    element.appendChild(shard);  // ‚Üê –ù–∞ DIV, –Ω–µ –Ω–∞ img!
    
    // –ê–Ω—ñ–º—É—î–º–æ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—é —É–ª–∞–º–∫–∞
    shard.animate([
        { transform: '...', opacity: 1 },
        { transform: '...', opacity: 0 }
    ], { duration: 700-1300ms });
}
```

### –ö–†–û–ö 5: –ü—Ä–∏—Ö–æ–≤—É—î–º–æ img —á–µ—Ä–µ–∑ 120ms (–õ–Ü 2535)
```javascript
setTimeout(() => {
    const img = element.querySelector('img');  // –ó–Ω–∞—Ö–æ–¥–∏–º–æ IMG –≤—Å–µ—Ä–µ–¥–∏–Ω—É
    if (img) img.style.opacity = '0';  // ‚Üê IMG —Å—Ç–∞—î –ø—Ä–æ–∑–æ—Ä–µ
}, 120);
```

### –ö–†–û–ö 6: –í–∏–¥–∞–ª—è—î–º–æ frame —á–µ—Ä–µ–∑ 1200ms (–õ–Ü 2540)
```javascript
setTimeout(() => {
    try { frame.remove(); } catch(e){}
}, 1200);
```

### –ö–†–û–ö 7: –í–∏–¥–∞–ª—è—î–º–æ –≤–µ—Å—å DIV —á–µ—Ä–µ–∑ 1100ms (–õ–Ü 2545)
```javascript
setTimeout(() => {
    try { element.remove(); } catch(e){}  // ‚Üê –í–ò–î–ê–õ–Ø–Ñ–ú–û –≤–µ—Å—å DIV (.symbol-item)
}, 1100);
```

---

## üìê –°–¢–†–£–ö–¢–£–†–ê –ü–Ü–°–õ–Ø –î–û–î–ê–í–ê–ù–ù–Ø –ï–§–ï–ö–¢–Ü–í

```html
–î–û –í–ò–ë–£–•–£:
<div class="symbol-item" data-row="5">
    <img src="..." />
</div>

–ü–Ü–î –ß–ê–° –í–ò–ë–£–•–£ (0-120ms):
<div class="symbol-item exploding" style="position:relative; z-index:15;">
    <img src="..." style="opacity:1" />  ‚Üê –©–µ –≤–∏–¥–∏–º–∞
    
    <div class="winning-frame"></div>
    ‚Üë –î–æ–¥–∞–Ω–∞ —Ä–∞–º–∫–∞
    
    <div class="shard" style="transform: translate(-50%, -50%) rotate(45deg);">
    <div class="shard" style="transform: translate(-50%, -50%) rotate(12deg);">
    <div class="shard" style="transform: translate(-50%, -50%) rotate(89deg);">
    ... (—â–µ 5-19 —É–ª–∞–º–∫—ñ–≤)
</div>

–ü–Ü–î –ß–ê–° –ê–ù–Ü–ú–ê–¶–Ü–á (120-700ms):
<div class="symbol-item exploding" style="position:relative; z-index:15;">
    <img src="..." style="opacity:0" />  ‚Üê –ó–∞—Ä–∞–∑ 0, –Ω–µ–≤–∏–¥–∏–º–∞!
    
    <div class="winning-frame"></div>
    
    <div class="shard" style="transform: translate(-50%, -50%) translate(45px, -32px) scale(0.3) rotate(360deg); opacity:0;">
    ‚Üë –õ–µ—Ç—è—Ç—å –≥–µ—Ç—å, —Å—Ç–∞—é—Ç—å –ø—Ä–æ–∑–æ—Ä—ñ
    
    <div class="shard" style="transform: translate(-50%, -50%) translate(-52px, 28px) scale(0.3) rotate(180deg); opacity:0;">
    ...
</div>

–ü–Ü–°–õ–Ø –í–ò–ë–£–•–£ (>1100ms):
[–í–ï–°–¨ DIV –í–ò–î–ê–õ–ï–ù–ò–ô –Ü–ó DOM]
```

---

## üéØ –ü–Ü–î–°–£–ú–û–ö

| –ï–ª–µ–º–µ–Ω—Ç | –û—Ç—Ä–∏–º—É—î —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—é? | –©–æ –∑–º—ñ–Ω—é—î—Ç—å—Å—è |
|---------|------------------------|---------------|
| `.symbol-item` (DIV) | ‚úÖ **–î–ê** | `position`, `z-index`, `classList.add('exploding')` |
| `.symbol-item img` | ‚ùå **–ù–Ü** | –¢—ñ–ª—å–∫–∏ `opacity` —á–µ—Ä–µ–∑ 120ms |
| `.shard` (—É–ª–∞–º–∫–∏) | ‚úÖ **–î–ê** | `transform` (translate, scale, rotate), `opacity` |
| `.winning-frame` (—Ä–∞–º–∫–∞) | ‚ùå **–ù–Ü** | –ù–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è, –ø—Ä–æ—Å—Ç–æ –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è |

---

## üí° –¶–Ü–ö–ê–í–Ü –§–ê–ö–¢–ò

### 1. IMG –ù–Ü–ö–û–õ–ò –ù–ï –ê–ù–Ü–ú–£–Ñ–¢–¨–°–Ø
- IMG –æ—Ç—Ä–∏–º—É—î —Ç—ñ–ª—å–∫–∏ `opacity = 0` —á–µ—Ä–µ–∑ 120ms
- IMG –ù–ï –æ—Ç—Ä–∏–º—É—î `transform`
- IMG –ù–ï –ª–µ—Ç–∏—Ç—å —ñ –ù–ï –æ–±–µ—Ä—Ç–∞—î—Ç—å—Å—è

### 2. –ë–ê–¢–¨–ö–Ü–í–°–¨–ö–ò–ô DIV –ö–û–ù–¢–†–û–õ–Æ–Ñ –†–û–ó–¢–ê–®–£–í–ê–ù–ù–Ø
- –£–ª–∞–º–∫–∏ —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è –≤—ñ–¥–Ω–æ—Å–Ω–æ –¶–ï–ù–¢–†–£ `.symbol-item` DIV
- –ö–æ–ª–∏ –≤–∏–¥–∞–ª—è—î–º–æ DIV, –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –í–°–Ü –π–æ–≥–æ –¥—ñ—Ç–∏ (img, frame, shards)

### 3. –ö–ê–°–ö–ê–î–ù–ï –í–ò–î–ê–õ–ï–ù–ù–Ø
1. 120ms ‚Üí IMG.opacity = 0
2. 700-1300ms ‚Üí SHARDS –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è (—ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ)
3. 1100ms ‚Üí element.remove() (–≤–µ—Å—å DIV)
4. 1200ms ‚Üí frame.remove() (—è–∫—â–æ —â–µ —ñ—Å–Ω—É—î)

### 4. –í–†–ï–ú–ï–ù–ù–Ü –û–ö–ù–ê –ü–ï–†–ï–ö–†–ò–í–ê–Æ–¢–¨–°–Ø
```
IMG opacity:        120ms
SHARDS animation:   0-1300ms ‚Üê –¶–µ –¥–æ–≤—à–µ –∑–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è DIV!
DIV removal:        1100ms
Frame removal:      1200ms
```

–£–ª–∞–º–∫–∏ –º–æ–∂—É—Ç—å —â–µ –º–∞—Ç–∏ `opacity: 0` –∫–æ–ª–∏ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π DIV –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è (—Ç–æ–º—É —â–æ –∞–Ω—ñ–º–∞—Ü—ñ—è –¥–æ–≤—à–∞).

---

## üîó –ü–û–°–ò–õ–ê–ù–ù–Ø –ù–ê –ö–û–î

| –û–ø–µ—Ä–∞—Ü—ñ—è | –õ—ñ–Ω—ñ—è | –§—É–Ω–∫—Ü—ñ—è |
|----------|------|---------|
| –ó–Ω–∞—Ö–æ–¥–∏–º–æ –µ–ª–µ–º–µ–Ω—Ç | 4650 | `simultaneousExplodeAndFill()` |
| –í–∏–∫–ª–∏–∫–∞—î–º–æ –≤–∏–±—É—Ö | 2657 | `simultaneousExplodeAndFill()` |
| –î–æ–¥–∞—î–º–æ transform | 2466-2468 | `addExplosionEffect()` |
| –î–æ–¥–∞—î–º–æ —Ä–∞–º–∫—É | 2469-2472 | `addExplosionEffect()` |
| –°—Ç–≤–æ—Ä—é—î–º–æ —É–ª–∞–º–∫–∏ | 2492-2530 | `addExplosionEffect()` |
| –†–æ–±–∏–º–æ img –ø—Ä–æ–∑–æ—Ä–µ | 2535-2538 | `addExplosionEffect()` |
| –í–∏–¥–∞–ª—è—î–º–æ frame | 2540-2542 | `addExplosionEffect()` |
| –í–∏–¥–∞–ª—è—î–º–æ –≤–µ—Å—å DIV | 2545-2547 | `addExplosionEffect()` |
